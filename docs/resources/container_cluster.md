---
page_title: "visionone_container_cluster Resource - cluster"
subcategory: ""
description: |-
  The container_cluster resource allows you to manage Kubernetes cluster.
---

# visionone_container_cluster (Resource)

The `container_cluster` resource allows you to manage Kubernetes cluster.

It's **strongly recommended** to use [Helm](https://registry.terraform.io/providers/hashicorp/helm/latest) to associate with the cluster resource.

## Example Usage of Cluster

```terraform
resource "visionone_container_cluster" "example_cluster" {
  name                       = "example_cluster"
  description                = "This is a sample cluster"
  resource_id                = "arn:aws:eks:xxx:xxx:cluster/xxx"
  policy_id                  = "LogOnlyPolicy-xxx"
  group_id                   = "00000000-0000-0000-0000-000000000001"
  runtime_security_enabled   = true
  vulnerability_scan_enabled = true
  malware_scan_enabled       = true
  secret_scan_enabled        = true
  namespaces                 = ["kube-system"]
  customizable_tags          = [{ id = "tag-id-1" }, { id = "tag-id-2" }]
}
```

## Example Usage of Helm

```terraform
resource "helm_release" "trendmicro" {
  name             = "trendmicro"
  chart            = "https://github.com/trendmicro/visionone-container-security-helm/archive/main.tar.gz"
  namespace        = "trendmicro-system"
  create_namespace = true
  wait             = false

  set {
    name  = "visionOne.bootstrapToken"
    value = visionone_container_cluster.example_cluster.api_key
  }
  set {
    name  = "visionOne.endpoint"
    value = visionone_container_cluster.example_cluster.endpoint
  }
  set_list {
    name  = "visionOne.exclusion.namespaces"
    value = visionone_container_cluster.example_cluster.namespaces
  }
  set {
    name  = "visionOne.runtimeSecurity.enabled"
    value = visionone_container_cluster.example_cluster.runtime_security_enabled
  }
  set {
    name  = "visionOne.vulnerabilityScanning.enabled"
    value = visionone_container_cluster.example_cluster.vulnerability_scan_enabled
  }
  set {
    name  = "visionOne.malwareScanning.enabled"
    value = visionone_container_cluster.example_cluster.malware_scan_enabled
  }
  set {
    name  = "visionOne.secretScanning.enabled"
    value = visionone_container_cluster.example_cluster.secret_scan_enabled
  }
  set {
    name  = "visionOne.inventoryCollection.enabled"
    value = visionone_container_cluster.example_cluster.inventory_collection
  }
}
```

## Example Usage of proxy
add the block if you need proxy.
```terraform
resource "visionone_container_cluster" "example_cluster" {
  #...
  proxy = {
    type          = "http"
    proxy_address = "192.168.0.1"
    port          = 8080
    username      = "user"
    password      = "password"
  }
}


resource "helm_release" "trendmicro" {
  #...
  set {
    name  = "proxy.httpsProxy"
    value = visionone_container_cluster.example_cluster.proxy.https_proxy
  }
  set {
    name  = "proxy.username"
    value = visionone_container_cluster.example_cluster.proxy.username
  }
  set {
    name  = "proxy.password"
    value = visionone_container_cluster.example_cluster.proxy.password
  }
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `group_id` (String) The ID of the group associated with the cluster. To get IDs of the groups within the user's management scope, use the Kubernetes cluster groups API to list these IDs.
- `name` (String) The name of the cluster.

### Optional

- `customizable_tags` (Attributes Set) The custom tags and platform tags associated with the cluster. To obtain custom tags, refer to the following URL: https://automation.trendmicro.com/xdr/api-v3/#tag/Attack-Surface-Discovery/paths/~1v3.0~1asrm~1attackSurfaceCustomTags/get. However, platform tags will be provided through an additional API in the future. The difference between custom tags and platform tags is that properties of platform tags are defined by Trend Micro, while properties and values of custom tags can be created and updated by users. (see [below for nested schema](#nestedatt--customizable_tags))
- `description` (String) The description of the cluster.
- `malware_scan_enabled` (Boolean) Whether malware scan is enabled for the cluster.
- `namespaces` (Set of String) The namespaces of kubernetes you want to exclude from scanning. 
Accepted values: `calico-system`, `istio-system`, `kube-system`, `openshift*` Default value: `kube-system`
- `policy_id` (String) The ID of the policy associated with the cluster.
- `proxy` (Attributes) The proxy server for in-cluster component connect to Vision One (see [below for nested schema](#nestedatt--proxy))
- `resource_id` (String) The ID of the cluster of a different cloud provider.
- `runtime_security_enabled` (Boolean) Whether runtime security is enabled for the cluster.
- `secret_scan_enabled` (Boolean) Whether secret scan is enabled for the cluster.
- `vulnerability_scan_enabled` (Boolean) Whether vulnerability scan is enabled for the cluster.

### Read-Only

- `api_key` (String, Sensitive) The API key for cluster enrollment.
- `created_date_time` (String) The time when the cluster was created.
- `endpoint` (String) The regional endpoint URL for Container Security.
- `id` (String) The unique ID of the cluster.
- `inventory_collection` (Boolean)
- `last_evaluated_date_time` (String) Last time of the cluster was evaluated against the policy rules.
- `orchestrator` (String) The orchestrator of the cluster.
- `updated_date_time` (String) The time when the cluster was last updated.

<a id="nestedatt--customizable_tags"></a>
### Nested Schema for `customizable_tags`

Required:

- `id` (String) The ID of the custom tag.


<a id="nestedatt--proxy"></a>
### Nested Schema for `proxy`

Required:

- `port` (Number) The port of proxy.
- `proxy_address` (String) The address of proxy server.
- `type` (String) The protocol of proxy. Accepted values: `HTTP` `SOCKS5`.

Optional:

- `password` (String, Sensitive) The password for proxy server authentication.
- `username` (String) The username for proxy server authentication.

Read-Only:

- `https_proxy` (String) The endpoint of proxy server.

## Import

Import is supported using the following syntax:

```shell
terraform import visionone_container_cluster.example_cluster ${cluster_id}
```

### Limitations of Import API key
ApiKey can not import with terraform command, you need to set it manually.
Please locate your running cluster and try get values from helm.
```shell
helm get values trendmicro -n trendmicro-system | grep apiKey
```