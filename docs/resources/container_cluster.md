---
page_title: "visionone_container_cluster Resource - cluster"
subcategory: ""
description: |-
  The container_cluster resource allows you to manage Kubernetes cluster.
---

# visionone_container_cluster (Resource)

The `container_cluster` resource allows you to manage Kubernetes cluster.

It's **strongly recommended** to use [Helm](https://registry.terraform.io/providers/hashicorp/helm/latest) to associate with the cluster resource.

## Example Usage of Cluster

```terraform
resource "visionone_container_cluster" "example_cluster" {
  name                       = "example_cluster"
  description                = "This is a sample cluster"
  resource_id                = "arn:aws:eks:xxx:xxx:cluster/xxx"
  policy_id                  = "LogOnlyPolicy-xxx"
  group_id                   = "00000000-0000-0000-0000-000000000000"
  runtime_security_enabled   = true
  vulnerability_scan_enabled = true
  namespaces                 = ["kube-system"]
}
```

## Example Usage of Helm

```terraform
resource "helm_release" "trendmicro" {
  name             = "trendmicro"
  chart            = "https://github.com/trendmicro/cloudone-container-security-helm/archive/master.tar.gz"
  namespace        = "trendmicro-system"
  create_namespace = true

  set {
    name  = "cloudOne.apiKey"
    value = visionone_container_cluster.example_cluster.api_key
  }
  set {
    name  = "cloudOne.endpoint"
    value = visionone_container_cluster.example_cluster.endpoint
  }
  set_list {
    name  = "cloudOne.exclusion.namespaces"
    value = visionone_container_cluster.example_cluster.namespaces
  }
  set {
    name  = "cloudOne.runtimeSecurity.enabled"
    value = visionone_container_cluster.example_cluster.runtime_security_enabled
  }
  set {
    name  = "cloudOne.vulnerabilityScanning.enabled"
    value = visionone_container_cluster.example_cluster.vulnerability_scan_enabled
  }
  set {
    name  = "cloudOne.inventoryCollection.enabled"
    value = visionone_container_cluster.example_cluster.inventory_collection
  }
}
```

## Example Usage of proxy
add the block if you need proxy.
```terraform
resource "visionone_container_cluster" "example_cluster" {
  #...
  proxy = {
    type          = "http"
    proxy_address = "192.168.0.1"
    port          = 8080
    username      = "user"
    password      = "password"
  }
}


resource "helm_release" "trendmicro" {
  #...
  set {
    name  = "proxy.httpsProxy"
    value = visionone_container_cluster.example_cluster.proxy.https_proxy
  }
  set {
    name  = "proxy.username"
    value = visionone_container_cluster.example_cluster.proxy.username
  }
  set {
    name  = "proxy.password"
    value = visionone_container_cluster.example_cluster.proxy.password
  }
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `group_id` (String) The ID of the group associated with the cluster. To get the group ID, go to Container Security > Container Inventory on the Trend Vision One console.
- `name` (String) The name of the cluster.

### Optional

- `description` (String) The description of the cluster.
- `namespaces` (Set of String) The namespaces of kubernetes you want to exclude from scanning. 
Accepted values: `calico-system`, `istio-system`, `kube-system`, `openshift*` Default value: `kube-system`
- `policy_id` (String) The ID of the policy associated with the cluster.
- `proxy` (Attributes) The proxy server for in-cluster component connect to Vision One (see [below for nested schema](#nestedatt--proxy))
- `resource_id` (String) The ID of the cluster of a different cloud provider.
- `runtime_security_enabled` (Boolean) Whether runtime security is enabled for the cluster.
- `vulnerability_scan_enabled` (Boolean) Whether vulnerability scan is enabled for the cluster.

### Read-Only

- `api_key` (String, Sensitive) The API key for cluster enrollment.
- `created_date_time` (String) The time when the cluster was created.
- `endpoint` (String) The regional endpoint URL for Container Security.
- `id` (String) The unique ID of the cluster.
- `inventory_collection` (Boolean)
- `last_evaluated_date_time` (String) Last time of the cluster was evaluated against the policy rules.
- `orchestrator` (String) The orchestrator of the cluster.
- `updated_date_time` (String) The time when the cluster was last updated.

<a id="nestedatt--proxy"></a>
### Nested Schema for `proxy`

Required:

- `port` (Number) The port of proxy.
- `proxy_address` (String) The address of proxy server.
- `type` (String) The protocol of proxy. Accepted values: `HTTP` `SOCKS5`.

Optional:

- `password` (String, Sensitive) The password for proxy server authentication.
- `username` (String) The username for proxy server authentication.

Read-Only:

- `https_proxy` (String) The endpoint of proxy server.

## Import

Import is supported using the following syntax:

```shell
terraform import visionone_container_cluster.example_cluster ${cluster_id}
```

### Limitations of Import API key
ApiKey can not import with terraform command, you need to set it manually.
Please locate your running cluster and try get values from helm.
```shell
helm get values trendmicro -n trendmicro-system | grep apiKey
```